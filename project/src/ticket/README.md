# 콘솔 기반 티켓 예매 시스템

이 프로젝트는 **자바의 클래스와 객체(OOP)** 학습을 목적으로 작성된 콘솔 프로그램으로, 10×10 공연장 좌석을 대상으로 한 티켓 예약 시스템을 구현합니다. 사용자 관리, 좌석 예약/취소, 결제 처리 등 실전 애플리케이션에서 접할 수 있는 기능들을 연습하기 위해 구성되어 있습니다.

## 주요 기능

### 공연장 좌석 관리
- **좌석 조회:** 10×10 행렬 형태의 좌석을 표시합니다. 예약되지 않은 일반석은 `[o]`, VIP석은 `[V]`, 예약된 좌석은 `[x]` 로 표시합니다. 상위 2개 행은 VIP석이며 가격이 다릅니다.
- **좌석 예매:** 사용자 인증 후 행과 열을 입력하여 좌석을 예약합니다. VIP석은 20 000원, 일반석은 10 000원입니다.
- **예약 취소:** 사용자 인증 후 본인의 예약 좌석 목록을 확인하고 특정 좌석을 취소할 수 있습니다.
- **예약 조회:** 사용자 인증 후 본인의 예약 좌석 목록(행, 열)을 확인할 수 있습니다.
- **입력값 검증:** 행·열 범위가 유효한지, 이미 예약된 좌석인지 등을 확인합니다. 오류가 발생할 경우 커스텀 예외가 발생하여 적절한 메시지를 출력합니다.

### 사용자 관리
- **사용자 생성:** 이름, 비밀번호, 초기 예치금(잔액)을 입력하여 사용자 객체를 생성합니다. 생성 시 자동으로 사용자 ID가 부여되며 `User#ID[이름]` 형식으로 출력됩니다.
- **로그인/인증:** 모든 예약, 조회, 취소 기능은 사용자 번호와 비밀번호로 인증을 수행합니다.
- **잔액 관리:** `Account` 클래스를 통해 잔액을 관리하며, 예치(`deposit`)와 결제(`withdrawal`) 기능을 제공합니다.

### 결제 처리
- **결제 옵션:** `CreditCard`(카드)와 `BankTransfer`(계좌 이체) 두 가지 결제 방식을 제공합니다. 각 결제 방식은 `Payable` 인터페이스를 구현하여 동일한 `pay(User, int)` 메서드로 결제를 진행합니다.
- **잔액 부족 처리:** 잔액이 부족하면 결제가 실패하고 좌석 예약은 자동으로 취소됩니다.

### 관리자 기능
- **예약 좌석 정렬:** 관리자 모드(메뉴 `-100`)에서는 예약된 좌석을 **가격순** 또는 **예약자 이름순**으로 정렬하여 출력할 수 있습니다. 예약자 이름순 정렬 시 행과 열 정보도 함께 정렬됩니다.

### 예외 처리
로직에서 발생할 수 있는 오류 상황을 명확히 처리하기 위해 여러 **커스텀 예외 클래스**를 정의했습니다. 주요 예외는 다음과 같습니다.
- **좌석 관련 예외 (`SeatException` 계열)**:
    - `InvalidSeatException`: 존재하지 않는 행·열을 입력했을 때 발생합니다.
    - `AlreadyBookedException`: 이미 예약된 좌석을 예약하려 할 때 발생합니다.
    - `SeatNotBookedException`: 예약되지 않은 좌석을 취소하려 할 때 발생합니다.
    - `NotMySeatException`: 본인이 예약하지 않은 좌석을 취소하려 할 때 발생합니다.
- **결제 및 잔액 관련 예외 (`PaymentException` 계열)**:
    - `InsufficientBalanceException`: 잔액이 부족할 때 발생합니다.
    - `InvalidPaymentOptionException`: 존재하지 않는 결제 옵션을 선택했을 때 발생합니다.


모든 예외는 최상위 클래스 `ReservationException`을 상속하여 필요에 따라 catch 블록에서 구체적 혹은 포괄적으로 처리할 수 있습니다. `Main` 클래스에서는 이러한 예외를 잡아 사용자에게 이해하기 쉬운 메시지를 출력하며, 잔액 부족 시 자동으로 좌석 예약을 취소하는 등 후처리를 수행합니다.

## 패키지 구성

| 패키지/클래스                        | 역할                                                                                                                                                                                                                                                                                                  |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ticket.Main`                  | 전체 프로그램의 진입점. 메뉴를 표시하고 사용자 입력을 받아 각 기능을 호출합니다.                                                                                                                                                                                                                                                      |
| `ticket.service.ConcertHall`   | 10×10 좌석(`Seat`) 배열을 생성하고 예약/취소/조회 등 좌석 관리 로직을 담당합니다.                                                                                                                                                                                                                                               |
| `ticket.model.Seat`            | 개별 좌석을 나타내며, 예매 여부, 예약자 이름, VIP 여부, 가격 등을 관리합니다. `Reservable` 인터페이스를 구현합니다.                                                                                                                                                                                                                         |
| `ticket.model.User`            | 사용자 정보를 저장하고, 잔액을 관리하는 `Account`를 포함합니다. 비밀번호 검증 및 결제(출금) 기능을 제공합니다.                                                                                                                                                                                                                                |
| `ticket.model.Account`         | 사용자 잔액에 대한 입금(`deposit`), 출금(`withdrawal`) 기능을 제공합니다.                                                                                                                                                                                                                                               |
| `ticket.interfaces.Reservable` | 좌석 예약 기능을 위한 인터페이스. `isBooked`, `book`, `getPrice`, `getInfo` 메서드를 정의합니다.                                                                                                                                                                                                                           |
| `ticket.interfaces.Payable`    | 결제 기능을 위한 인터페이스. `pay(User, int)` 메서드를 통해 금액 결제를 수행합니다.                                                                                                                                                                                                                                             |
| `ticket.payment.CreditCard`    | 카드 결제를 구현한 클래스. 잔액을 확인한 후 결제 성공 여부를 반환합니다.                                                                                                                                                                                                                                                          |
| `ticket.payment.BankTransfer`  | 계좌 이체 결제를 구현한 클래스. 잔액을 확인한 후 결제 성공 여부를 반환합니다.                                                                                                                                                                                                                                                       |
| `ticket.utils.PayUtils`        | 사용자가 선택한 결제 옵션에 따라 `Payable` 구현체(`CreditCard`/`BankTransfer`)를 반환합니다.                                                                                                                                                                                                                               |
| `ticket.utils.UserManager`     | 사용자 목록을 관리하고, 사용자 생성, 인증, 조회 등의 기능을 제공합니다.                                                                                                                                                                                                                                                          |
| `ticket.utils.UserUtils`       | 사용자 목록 출력 및 예약 시 사용되는 예약자 이름(`이름+ID`)을 생성하는 유틸리티를 제공합니다.                                                                                                                                                                                                                                            |
| `ticket.exception`             | 예약 시스템 전반에 걸쳐 사용하는 커스텀 예외 클래스들을 정의합니다. `ReservationException`을 기반으로 좌석 관련(`SeatException`, `InvalidSeatException`, `AlreadyBookedException`, `SeatNotBookedException`, `NotMySeatException`)과 결제 관련(`PaymentException`, `InsufficientBalanceException`, `InvalidPaymentOptionException`) 예외를 제공합니다. |

## 실행 방법

### IntelliJ IDEA

1. 저장소를 클론(clone)하거나 ZIP 파일로 내려받아 IntelliJ에서 **열기(Open)** 합니다.
2. `project/src/ticket/Main.java` 파일을 찾습니다. 이 파일의 `main()` 메서드가 프로그램의 진입점입니다.
3. `Main.java` 파일을 열고 **Run** 버튼을 클릭하여 프로그램을 실행합니다.


### 터미널에서 실행 (선택)
자바 JDK가 설치되어 있을 경우, 터미널에서 수동으로 컴파일·실행할 수 있습니다.
``` java
# 프로젝트 루트에서 src 경로로 이동 
cd project/src    

# 모든 소스 파일 컴파일 (컴파일된 클래스는 현재 디렉터리에 생성됨) 
javac ticket/**/*.java    

# Main 클래스 실행 
java ticket.Main
```
실행 후 메뉴가 표시되며 번호를 입력하여 기능을 선택할 수 있습니다. 사용자 번호와 비밀번호를 입력해야 하는 기능에서는 처음 사용자 생성 시 안내된 번호와 비밀번호를 사용하세요.

## 확장 아이디어
- 잔액 충전 기능을 추가하여 결제 전 잔액이 부족한 경우 즉시 충전 가능하도록 개선할 수 있습니다.
- 파일 또는 데이터베이스에 예약 정보를 저장하여 프로그램 재실행 시에도 데이터를 유지할 수 있습니다.
- 그래픽 사용자 인터페이스(GUI)로 확장하거나 웹 애플리케이션으로 구현하여 사용자 경험을 개선할 수 있습니다.
   